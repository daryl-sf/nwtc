version: 1
applications:
  - frontend:
      phases:
        preBuild:
          commands:
            - npm install  # Install dependencies
        build:
          commands:
            - npm run build  # Build Next.js app
      artifacts:
        baseDirectory: .next
        files:
          - '**/*'  # Deploy all files from the .next directory
      cache:
        paths:
          - node_modules/**  # Cache dependencies
      environment:
        variables:
          NEXT_PUBLIC_TEST_VAR: "HELLO"
